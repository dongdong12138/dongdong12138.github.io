<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-front-base/Promise/Promise的理解和使用" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.3.2">
<title data-rh="true">Promise 的理解和使用 | Barry&#x27;s Site</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://donghao.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://donghao.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://donghao.github.io/docs/front-base/Promise/Promise的理解和使用"><meta data-rh="true" property="og:locale" content="zh"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Promise 的理解和使用 | Barry&#x27;s Site"><meta data-rh="true" name="description" content="Promise 是什么"><meta data-rh="true" property="og:description" content="Promise 是什么"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://donghao.github.io/docs/front-base/Promise/Promise的理解和使用"><link data-rh="true" rel="alternate" href="https://donghao.github.io/docs/front-base/Promise/Promise的理解和使用" hreflang="zh"><link data-rh="true" rel="alternate" href="https://donghao.github.io/docs/front-base/Promise/Promise的理解和使用" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Barry&#39;s Site RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Barry&#39;s Site Atom Feed"><link rel="stylesheet" href="/assets/css/styles.131e86da.css">
<script src="/assets/js/runtime~main.39b0287d.js" defer="defer"></script>
<script src="/assets/js/main.d45c0c92.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Barry&#x27;s Site</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/front-base/小程序">前端基础</a><a class="navbar__item navbar__link" href="/docs/front-frame/Vue3/前言">前端框架</a><a class="navbar__item navbar__link" href="/docs/projects/miniprogram-music">项目集锦</a><a class="navbar__item navbar__link" href="/docs/front-standard/HTML编码规范">前端开发规范</a><a class="navbar__item navbar__link" href="/blog">前端 Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/front-base/小程序">小程序</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/front-base/Git">Git</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/front-base/Promise/准备工作">Promise</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/front-base/Promise/准备工作">准备工作</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/front-base/Promise/Promise的理解和使用">Promise 的理解和使用</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/front-base/Promise/Promise的几个关键问题">Promise 的几个关键问题</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/front-base/Promise/Promise自定义封装">Promise 自定义封装</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/front-base/Promise/async与await">async 与 await</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/front-base/Promise/宏队列与微队列">宏队列与微队列</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/front-base/SQL语句">SQL 语句</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/front-base/TypeScript">TypeScript</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/front-base/移动端">移动端</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Promise</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Promise 的理解和使用</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>Promise 的理解和使用</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="promise-是什么">Promise 是什么<a href="#promise-是什么" class="hash-link" aria-label="Promise 是什么的直接链接" title="Promise 是什么的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="理解-promise">理解 Promise<a href="#理解-promise" class="hash-link" aria-label="理解 Promise的直接链接" title="理解 Promise的直接链接">​</a></h3>
<p>Promise 是 JS 中进行异步编程的新的解决方案（旧方案是单纯使用回调函数）。</p>
<p>promise 对象用来封装一个异步操作（如 Ajax、定时器、fs 文件操作等），并可以获取这个异步任务成功或失败的结果。</p>
<p>具体使用就是，我们 <code>new Promise</code> 构造函数，得到一个 promise 实例对象，通过 promise 对象我们可以使用 <code>then</code>、<code>catch</code> 等方法。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="promise-的状态">Promise 的状态<a href="#promise-的状态" class="hash-link" aria-label="Promise 的状态的直接链接" title="Promise 的状态的直接链接">​</a></h3>
<p>实例对象 promise 中的一个属性 <code>PromiseState</code>，表示 Promise 的状态。</p>
<ul>
<li>一个 Promise 刚被 new 出来的时候，状态是 <code>pending</code>（未确定的）；</li>
<li>异步任务成功，状态从 <code>pending</code> 变为 <code>resolved</code>/<code>fullfilled</code>；</li>
<li>异步任务失败，状态从 <code>pending</code> 变为 <code>rejected</code>。</li>
</ul>
<p>注意：</p>
<ul>
<li>promise 对象的状态不受外界影响；</li>
<li>Promise 状态只有这三种，且一个 promise 对象的状态只能改变一次；</li>
<li>一旦状态改变，就不会再变，任何时候都可以得到这个结果；</li>
<li>无论成功还是失败，都会有一个结果数据。成功的结果数据一般称为 <code>value</code>，而失败的结果一般称为 <code>reason</code>。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="promise-对象的值">Promise 对象的值<a href="#promise-对象的值" class="hash-link" aria-label="Promise 对象的值的直接链接" title="Promise 对象的值的直接链接">​</a></h3>
<p>实例对象 promise 的另一个属性 <code>PromiseResult</code>，保存着对象成功（<code>value</code>）或失败（<code>reason</code>）的值。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="promise-的基本流程">Promise 的基本流程<a href="#promise-的基本流程" class="hash-link" aria-label="Promise 的基本流程的直接链接" title="Promise 的基本流程的直接链接">​</a></h3>
<p><img decoding="async" loading="lazy" alt="img.png" src="/assets/images/img-77dc00d59f317cadb91fbdad4b130ddd.png" width="1049" height="222" class="img_ev3q"></p>
<ul>
<li><code>new Promise()</code> 中接收一个回调函数作为参数，在回调函数中执行异步操作；</li>
<li><code>then()</code> 可以指定成功或者失败的回调函数，<code>catch()</code> 只能指定失败的回调函数；</li>
<li><code>then()</code>、<code>catch()</code> 都会返回一个新的 promise 对象。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="promise-的基本使用">Promise 的基本使用<a href="#promise-的基本使用" class="hash-link" aria-label="Promise 的基本使用的直接链接" title="Promise 的基本使用的直接链接">​</a></h3>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> promise </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 执行器函数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 执行器回调中做异步操作</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">异步操作成功</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">reason</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Promise 构造函数接受一个执行器函数作为参数，执行器函数的两个参数分别是 <code>resolve</code> 和 <code>reject</code>。它们是两个函数，由 JavaScript 引擎提供，不用自己部署。</p>
<ul>
<li><code>resolve</code> 函数的作用是，将 Promise 对象的状态从“未完成”变为“成功”（即从 <code>pending</code> 变为 <code>resolved</code>），在异步操作成功时调用，并将成功的结果作为参数 <code>value</code> 传递出去；</li>
<li><code>reject</code> 函数的作用是，将 Promise 对象的状态从“未完成”变为“失败”（即从 <code>pending</code> 变为 <code>rejected</code>），在异步操作失败时调用，并将失败的原因或错误对象作为参数 <code>reason</code>/<code>error</code> 传递出去。</li>
</ul>
<p>Promise 实例生成以后，可以用 <code>then</code> 方法分别指定 <code>resolved</code> 状态和 <code>rejected</code> 状态的回调函数。</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// onResolved</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// success</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">reason</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// onRejected</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// failure</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>then</code> 方法可以接受两个回调函数作为参数：</p>
<ul>
<li>第一个回调函数 <code>onResolved()</code>，是 Promise 对象的状态变为 <code>resolved</code> 时调用；</li>
<li>第二个回调函数 <code>onRejected()</code>，是 Promise 对象的状态变为 <code>rejected</code> 时调用；</li>
<li>这两个函数都是可选的，不一定要提供。它们都接受 Promise 对象传出的值作为参数。</li>
</ul>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">完整代码</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> p </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 执行器函数（同步回调）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 执行异步操作任务                                             </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> time </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">time </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// 如果成功，调用 resolve(value)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;成功的数据，time=&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// 如果失败，调用 reject(reason)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;失败的数据，time=&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">value</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// 接收得到成功的 value 数据（onResolved）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;成功的回调&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token parameter">reason</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// 接收得到失败的 reason 数据（onRejected）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;失败的回调&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reason</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// .then() 和执行器（executor）都是同步执行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// .then() 中的回调函数是异步执行</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="为什么要用-promise">为什么要用 Promise<a href="#为什么要用-promise" class="hash-link" aria-label="为什么要用 Promise的直接链接" title="为什么要用 Promise的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="指定回调函数的方式更加灵活">指定回调函数的方式更加灵活<a href="#指定回调函数的方式更加灵活" class="hash-link" aria-label="指定回调函数的方式更加灵活的直接链接" title="指定回调函数的方式更加灵活的直接链接">​</a></h3>
<p>旧的方式：回调函数必须在启动异步任务之前指定。</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">纯回调的形式</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 成功的回调函数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">successCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;result:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 失败的回调函数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">failCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">reason</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;reason:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reason</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">request</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">success</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> fail</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> timeStamp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getTime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">timeStamp </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">success</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">timeStamp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">fail</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">timeStamp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 必须先指定回调函数，再执行异步任务</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">request</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">successCallback</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> failCallback</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Promise：启动异步任务（异步任务还  没有完成），就返回 promise 对象，然后给 promise 对象绑定回调函数（甚至可以在异步任务结束后指定）。</p>
<p>也就是说，这比纯回调的形式更加灵活，使用 Promise，回调函数可以在异步任务结束之前指定，也可以在异步任务结束之后指定。</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">successCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;result:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">failCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">reason</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;reason:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reason</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> p </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> timeStamp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getTime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">timeStamp </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">timeStamp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">timeStamp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 启动异步任务之前指定成功和失败的回调函数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">successCallback</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> failCallback</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 启动异步任务之后且异步任务返回结果之后，再指定成功和失败的回调函数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">successCallback</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> failCallback</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// .then() 和执行器（executor）同步执行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// .then() 中的回调函数异步执行</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到 剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="支持链式调用可以解决回调地狱问题">支持链式调用，可以解决回调地狱问题<a href="#支持链式调用可以解决回调地狱问题" class="hash-link" aria-label="支持链式调用，可以解决回调地狱问题的直接链接" title="支持链式调用，可以解决回调地狱问题的直接链接">​</a></h3>
<p>回调地狱：回调函数嵌套调用，外部回调函数异步执行的结果是其内部嵌套的回调函数执行的条件。</p>
<p>回调地狱的缺点：不便于阅读，不便于异常处理。</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">回调地狱</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">doSomething</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">doSomethingElse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">newResult</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">doThirdThing</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> newResult</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">finalResult</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Got the final result:&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> finalResult</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> failureCallback</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> failureCallback</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> failureCallback</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>解决方案：</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">promise 链式调用（仍然需要写回调函数）</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">doSomething</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">result</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">doSomethingElse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">newResult</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">doThirdThing</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">newResult</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">finalResult</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Got the final result:&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> finalResult</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">failureCallback</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 只要有一个 .then() 里面的回调有异常，都会被最后的 catch 捕获到，这叫 “异常传透”</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">async/await（不用写回调函数）</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">request</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">doSomething</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> newResult </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">doSomethingElse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> finalResult </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">doThirdThing</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">newResult</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Got the final result:&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> finalResult</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">failureCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="如何使用-promise">如何使用 Promise<a href="#如何使用-promise" class="hash-link" aria-label="如何使用 Promise的直接链接" title="如何使用 Promise的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="promise-构造函数">Promise 构造函数<a href="#promise-构造函数" class="hash-link" aria-label="Promise 构造函数的直接链接" title="Promise 构造函数的直接链接">​</a></h3>
<p>Promise(executor) <!-- -->：</p>
<ul>
<li><code>executor</code> 函数：执行器函数，通常写成 <code>(resolve, reject) =&gt; {}</code>，它是同步执行的。<!-- -->
<ul>
<li><code>resolve</code> 函数：成功时调用的函数，通常写成 <code>resove(value)</code>；</li>
<li><code>reject</code> 函数：失败时调用的函数，通常写成 <code>reject(reason)</code>。</li>
</ul>
</li>
<li><code>executor</code> 是执行器，会在 Promise 内部立即同步执行；异步操作 <code>resolve</code>/<code>reject</code> 就在 <code>executor</code> 中执行。</li>
<li>Promise 构造函数的方法有：<code>resolve</code>、<code>reject</code>、<code>all</code>、<code>race</code>、<code>allSettled</code>、<code>any</code> 等。</li>
<li>promise 原型对象（<code>Promise.prototype</code>）上的方法有 <code>then</code>、<code>catch</code>、<code>finally</code> 等。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="promiseprototypethen-方法">Promise.prototype.then 方法<a href="#promiseprototypethen-方法" class="hash-link" aria-label="Promise.prototype.then 方法的直接链接" title="Promise.prototype.then 方法的直接链接">​</a></h3>
<p><code>then</code> 方法可以指定成功的回调和失败的回调。</p>
<p>语法：<code>p.then(onResolved, onRejected)</code>。</p>
<ul>
<li><code>onResolved</code>：成功的回调，通常写成 <code>(value) =&gt; {}</code>；</li>
<li><code>onRejected</code>：失败的回调，通常写成 <code>(reason) =&gt; {}</code>。</li>
</ul>
<p>返回值：返回一个新的 promise 对象。</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;成功&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;失败&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// promise 的状态只能被更改一次，所以这里的 reject 是无效的</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">value</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;value:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// value: 成功</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">reson</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;reson:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reson</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 不会输出</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="promiseprototypecatch-方法">Promise.prototype.catch 方法<a href="#promiseprototypecatch-方法" class="hash-link" aria-label="Promise.prototype.catch 方法的直接链接" title="Promise.prototype.catch 方法的直接链接">​</a></h3>
<p><code>catch</code> 方法用于指定失败的回调。</p>
<p>语法：<code>p.catch(onRejected)</code>。</p>
<ul>
<li><code>onRejected</code> 函数：失败的回调，通常写成 <code>(reason) =&gt; {}</code>。</li>
</ul>
<p>返回值：返回一个新的 promise 对象。</p>
<p>说明：</p>
<ul>
<li>这是 <code>then()</code> 的语法糖，相当于 <code>then(undefined, onRejected)</code>；</li>
<li><code>catch</code> 除了可以用于获取失败的数据，也可以用于捕获错误。</li>
</ul>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">catch 获取失败的数据</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">成功</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;成功的数据&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// resolve 与 reject 一起调用，后者不起效果，因为 Promise 状态只能被改变一次</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// reject(&#x27;失败的数据&#x27;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;失败的数据&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">value</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// onResolved()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">reason</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// onRejected()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">reason</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">catch 捕获错误</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;成功&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">value</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;value:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// 不会输出</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;err:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// err: ReferenceError: value1 is not defined</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="promiseprototypefinally-方法">Promise.prototype.finally 方法<a href="#promiseprototypefinally-方法" class="hash-link" aria-label="Promise.prototype.finally 方法的直接链接" title="Promise.prototype.finally 方法的直接链接">​</a></h3>
<p><code>finally()</code> 方法用于指定不管 Promise 对象最后状态如何，都会执行的操作。</p>
<p><code>finally</code> 方法的回调不接受任何参数，这意味着没有办法知道，前面的 Promise 状态到底是成功还是失败的。这表明，<code>finally</code> 方法里面的操作，应该是与状态无关的，不依赖于 Promise 的执行结果。</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">promise</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">result</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">···</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">error</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">···</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword control-flow" style="color:#00009f">finally</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">···</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="promiseresolve-方法">Promise.resolve 方法<a href="#promiseresolve-方法" class="hash-link" aria-label="Promise.resolve 方法的直接链接" title="Promise.resolve 方法的直接链接">​</a></h3>
<p>语法：<code>Promise.resolve(value)</code>。</p>
<ul>
<li><code>value</code>：将被 Promise 对象解析的参数，也可以是一个成功或失败的 Promise 对象。</li>
</ul>
<p>返回值：</p>
<ul>
<li>如果传入的参数为非 Promise 类型的对象，则返回的结果为成功的 promise 对象；</li>
<li>如果传入的参数本身就是一个 Promise 对象，则直接返回这个 Promise 对象。</li>
</ul>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">传入普通值</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">521</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p1</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="img_1.png" src="data:image/png;base64,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" width="297" height="84" class="img_ev3q"></p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">传入 promise 对象</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// resolve(&#x27;OK&#x27;)  // 成功的 Promise</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Error&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">reason</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">reason</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="img_2.png" src="data:image/png;base64,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" width="280" height="97" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="promisereject-方法">Promise.reject 方法<a href="#promisereject-方法" class="hash-link" aria-label="Promise.reject 方法的直接链接" title="Promise.reject 方法的直接链接">​</a></h3>
<p>语法：<code>Promise.reject(reason)</code>。</p>
<p>返回值：不受所传参数的影响，始终返回一个失败的 promise 对象。</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">521</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;iloveyou&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;OK&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p3</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="img_3.png" src="/assets/images/img_3-d113a042345e66b7c12cb43f7205b4c4.png" width="283" height="230" class="img_ev3q"></p>
<p><code>Promise.resolve()</code> / <code>Promise.reject()</code> 方法就是一个语法糖，用来快速得到 Promise 对象。</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 产生一个成功值为 1 的 promise 对象</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//相当于</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> p1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> p2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> p3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">value</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">value</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p3</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">reason</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">reason</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// 3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="promiseall-方法">Promise.all 方法<a href="#promiseall-方法" class="hash-link" aria-label="Promise.all 方法的直接链接" title="Promise.all 方法的直接链接">​</a></h3>
<p>说明：返回一个新的 promise，只有所有的 promise 都成功才成功，只要有一个失败了就直接失败。</p>
<p>语法：<code>Promise.all(iterable)</code>。</p>
<ul>
<li><code>iterable</code>：包含 n 个 promise 的可迭代对象，如 Array 或 String。</li>
</ul>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">所有的 promise 都成功</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;OK&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Success&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Oh Yeah&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">all</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">p1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="img_4.png" src="data:image/png;base64,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" width="279" height="170" class="img_ev3q"></p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">有一个 promise 失败</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;OK&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Error&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Oh Yeah&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">all</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">p1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="img_5.png" src="data:image/png;base64,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" width="254" height="81" class="img_ev3q"></p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">完整示例</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> p1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> p2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> p3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> pAll1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">all</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">p1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> pAll2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">all</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">p1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 因为其中 p3 是失败的，所以 pAll1 失败</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pAll1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">value</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token parameter">reason</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">reason</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// 3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pAll2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">values</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// values 数组中的元素顺序，与传入 all 方法的数组中的元素顺序保持一致</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">values</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// [1, 2]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token parameter">reason</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">reason</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="promiserace-方法">Promise.race 方法<a href="#promiserace-方法" class="hash-link" aria-label="Promise.race 方法的直接链接" title="Promise.race 方法的直接链接">​</a></h3>
<p>说明：返回一个新的 promise，第一个完成的 promise 的结果状态就是最终的结果状态，谁先完成就输出谁（不管是成功还是失败）。</p>
<p>语法：<code>Promise.race(iterable)</code>。</p>
<ul>
<li><code>iterable</code>：包含 n 个 promise 的可迭代对象，如 Array 或 String。</li>
</ul>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;OK&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Success&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Oh Yeah&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">race</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">p1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="img_6.png" src="data:image/png;base64,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" width="291" height="69" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="promiseallsettled-方法">Promise.allSettled 方法<a href="#promiseallsettled-方法" class="hash-link" aria-label="Promise.allSettled 方法的直接链接" title="Promise.allSettled 方法的直接链接">​</a></h3>
<p><code>allsettled</code> 方法用来确定一组异步的操作是否都结束了（不管是成功还是失败），其中包含了 <code>fulfilled</code> 和 <code>rejected</code> 两种情况。</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;OK&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Error&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Oh Yeah&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">allSettled</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">p1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="img_7.png" src="/assets/images/img_7-a7d95375ce802b5f7718e6df057e52f4.png" width="494" height="231" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="promiseany-方法">Promise.any 方法<a href="#promiseany-方法" class="hash-link" aria-label="Promise.any 方法的直接链接" title="Promise.any 方法的直接链接">​</a></h3>
<p><code>any</code> 方法，只要参数中有一个 Promise 实例对象的状态为 <code>fulfilled</code>，则整体结果就会为 <code>fulfilled</code>。如果所有 Promise 实例的状态都是 <code>rejected</code>，那么整体结果就是 <code>rejected</code>。</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">只要有一个成功，就返回成功的 promise</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Error&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Success&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Oh Yeah&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">any</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">p1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="img_8.png" src="data:image/png;base64,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" width="494" height="138" class="img_ev3q"></p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">如果有多个成功，就返回第一个成功的 promise</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;ok&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Success&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Oh Yeah&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">any</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">p2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="img_9.png" src="data:image/png;base64,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" width="497" height="132" class="img_ev3q"></p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">如果全部失败，就返回失败的 promise</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Error&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Success&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> p3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Oh Yeah&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">any</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">p1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="img_10.png" src="data:image/png;base64,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" width="503" height="179" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="promisetry-方法">Promise.try 方法<a href="#promisetry-方法" class="hash-link" aria-label="Promise.try 方法的直接链接" title="Promise.try 方法的直接链接">​</a></h3>
<p>如果不知道或者不想区分某个操作（函数）是同步的还是异步的，就可以把这个操作放到 <code>Promise.try</code> 方法中。然后就可以使用 <code>then</code> 方法指定下一步流程，用 <code>catch</code> 捕获错误。</p>
<p><code>Promise.try()</code> 可以让同步函数同步执行，异步函数异步执行。</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">f</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;now&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;next&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// now</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// next</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>但 <code>Promise.try()</code> 现在只是一个提案，只是在其他的 Promise 库中有实现，浏览器中还无法使用。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="promisea-规范">Promise/A+ 规范<a href="#promisea-规范" class="hash-link" aria-label="Promise/A+ 规范的直接链接" title="Promise/A+ 规范的直接链接">​</a></h2>
<p>Promise/A+ 规范中文版：<a href="https://promisesaplus.com.cn/" target="_blank" rel="noopener noreferrer">https://promisesaplus.com.cn/</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/front-base/Promise/02-Promise的理解和使用.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/front-base/Promise/准备工作"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">准备工作</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/front-base/Promise/Promise的几个关键问题"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Promise 的几个关键问题</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#promise-是什么" class="table-of-contents__link toc-highlight">Promise 是什么</a><ul><li><a href="#理解-promise" class="table-of-contents__link toc-highlight">理解 Promise</a></li><li><a href="#promise-的状态" class="table-of-contents__link toc-highlight">Promise 的状态</a></li><li><a href="#promise-对象的值" class="table-of-contents__link toc-highlight">Promise 对象的值</a></li><li><a href="#promise-的基本流程" class="table-of-contents__link toc-highlight">Promise 的基本流程</a></li><li><a href="#promise-的基本使用" class="table-of-contents__link toc-highlight">Promise 的基本使用</a></li></ul></li><li><a href="#为什么要用-promise" class="table-of-contents__link toc-highlight">为什么要用 Promise</a><ul><li><a href="#指定回调函数的方式更加灵活" class="table-of-contents__link toc-highlight">指定回调函数的方式更加灵活</a></li><li><a href="#支持链式调用可以解决回调地狱问题" class="table-of-contents__link toc-highlight">支持链式调用，可以解决回调地狱问题</a></li></ul></li><li><a href="#如何使用-promise" class="table-of-contents__link toc-highlight">如何使用 Promise</a><ul><li><a href="#promise-构造函数" class="table-of-contents__link toc-highlight">Promise 构造函数</a></li><li><a href="#promiseprototypethen-方法" class="table-of-contents__link toc-highlight">Promise.prototype.then 方法</a></li><li><a href="#promiseprototypecatch-方法" class="table-of-contents__link toc-highlight">Promise.prototype.catch 方法</a></li><li><a href="#promiseprototypefinally-方法" class="table-of-contents__link toc-highlight">Promise.prototype.finally 方法</a></li><li><a href="#promiseresolve-方法" class="table-of-contents__link toc-highlight">Promise.resolve 方法</a></li><li><a href="#promisereject-方法" class="table-of-contents__link toc-highlight">Promise.reject 方法</a></li><li><a href="#promiseall-方法" class="table-of-contents__link toc-highlight">Promise.all 方法</a></li><li><a href="#promiserace-方法" class="table-of-contents__link toc-highlight">Promise.race 方法</a></li><li><a href="#promiseallsettled-方法" class="table-of-contents__link toc-highlight">Promise.allSettled 方法</a></li><li><a href="#promiseany-方法" class="table-of-contents__link toc-highlight">Promise.any 方法</a></li><li><a href="#promisetry-方法" class="table-of-contents__link toc-highlight">Promise.try 方法</a></li></ul></li><li><a href="#promisea-规范" class="table-of-contents__link toc-highlight">Promise/A+ 规范</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>